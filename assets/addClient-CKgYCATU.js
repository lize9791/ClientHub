import{C as e,a as l}from"./childHeader-Ck8NcBQ6.js";import{_ as a,r as t,a as o,s as r,c as n,b as u,d,w as i,e as s,o as m,f as c,g as p,u as _,h as g,i as f,j as b,M as V,k as h,l as y,m as w}from"./index-LAUQvybg.js";const q={class:"add-client-container"},v={class:"main-container"},U={class:"client-info-box"},k={class:"inline-box"},x=a({__name:"addClient",setup(a){const x=t(!1),j=o({client_name:"",is_transfer:!0,client_email:"",client_phone:"",follow_up_method:[],country:"",remark:"",state:"",origin:"",profit:"",inquiry_date:"",follow_up_date:"",file:[],order_num:"",language:"",client_company:"",product_name:"",product_specifications:""}),C={client_name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],is_transfer:[{required:!0,message:"请选择是否为转接客户",trigger:"change"}],client_email:[{required:!1,message:"请输入邮箱地址",trigger:"change"},{validator:e=>!e||/^[\w.-]+@[\w.-]+\.\w+$/.test(e),message:"邮箱格式不正确",trigger:"blur"}],client_phone:[{required:!1,message:"请输入联系电话",trigger:"change"},{validator:e=>!e||/^\+?[1-9]\d{0,3}[-.\s]?\d{4,14}(?:[-.\s]\d{1,13})?$/.test(e),message:"请输入正确的国际电话号码（示例：+86 13800138000）",trigger:"blur"}],follow_up_method:[{required:!0,message:"请选择跟进方式",trigger:"change"}],country:[{required:!0,message:"请输入或选择国家",trigger:"blur"}],remark:[{required:!1}],state:[{required:!0,message:"请选择客户状态",trigger:"change"}],origin:[{required:!0,message:"请选择客户来源",trigger:"change"}],profit:[{validator:e=>void 0===e||""===e||/^\d+(\.\d+)?$/.test(e),message:"利润必须为数字",trigger:"blur"}],inquiry_date:[{required:!0,message:"请选择日期",trigger:"change"}],file:[{required:!1}],order_num:[{required:!0,message:"请输入单号",trigger:"blur"}],language:[{required:!0,message:"请输入客户语言",trigger:"blur"}],client_company:[{required:!1,message:"请输入客户公司名称",trigger:"blur"}],product_name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],product_specifications:[{required:!0,message:"请输入产品规格",trigger:"blur"}]},Y=Object.entries(e).sort(([,e],[,l])=>e.localeCompare(l,"zh-CN")).map(([e,l])=>({label:l,value:e})),H=[];for(const e in r)H.push({label:r[e].label,value:e});const M=[];for(const e in h)M.push({label:h[e],value:e});const $=[];for(const e in y)$.push({label:y[e],value:e});const z=[];for(const e in w)z.push({label:w[e],value:e});const D=()=>{V.success("重置成功")},E=async({validateResult:l,firstError:a})=>{if(!0===l){const l={created_at:f().format("YYYY-MM-DD HH:mm:ss+08"),follow_up_method:j.follow_up_method.join(","),country:e[j.country],country_addrev:j.country,inquiry_date:j.inquiry_date+"+08",follow_up_date:j.follow_up_date+"+08"},a={...j,...l};delete a.file,x.value=!0;201===(await b.insertClient(a)).status&&(x.value=!1,await V.success("添加成功"))}else console.log("Errors: ",l),await V.warning(a)};return(e,a)=>{const t=s("t-input"),o=s("t-form-item"),r=s("t-date-picker"),f=s("t-select"),b=s("t-switch"),V=s("t-checkbox-group"),h=s("t-textarea"),y=s("t-input-number"),w=s("t-upload"),N=s("t-button"),R=s("t-space"),S=s("t-form"),B=s("SimpleBar");return m(),n("div",q,[u(l,{title:"新增客户"}),d("main",v,[u(B,{style:{"max-height":"100%"}},{default:i(()=>[d("div",U,[u(S,{ref:"form",data:j,rules:C,"reset-type":"initial",disabled:x.value,colon:"",onReset:D,onSubmit:E},{default:i(()=>[u(o,{label:"姓名",name:"client_name"},{default:i(()=>[u(t,{modelValue:j.client_name,"onUpdate:modelValue":a[0]||(a[0]=e=>j.client_name=e),placeholder:"请输入客户姓名"},null,8,["modelValue"])]),_:1}),d("div",k,[u(o,{label:"询盘日期",name:"inquiry_date"},{default:i(()=>[u(r,{modelValue:j.inquiry_date,"onUpdate:modelValue":a[1]||(a[1]=e=>j.inquiry_date=e),mode:"date","enable-time-picker":"","allow-input":"",clearable:""},null,8,["modelValue"])]),_:1}),u(o,{label:"客户语言",name:"language"},{default:i(()=>[u(f,{modelValue:j.language,"onUpdate:modelValue":a[2]||(a[2]=e=>j.language=e),options:z,clearable:"",filterable:"",placeholder:"请选择客户语言"},null,8,["modelValue"])]),_:1})]),u(o,{label:"国家",name:"country"},{default:i(()=>[u(f,{modelValue:j.country,"onUpdate:modelValue":a[3]||(a[3]=e=>j.country=e),options:_(Y),clearable:"",filterable:"",placeholder:"请选择客户国家"},null,8,["modelValue","options"])]),_:1}),u(o,{label:"客户公司",name:"client_company"},{default:i(()=>[u(t,{modelValue:j.client_company,"onUpdate:modelValue":a[4]||(a[4]=e=>j.client_company=e),placeholder:"请输入客户公司名称"},null,8,["modelValue"])]),_:1}),u(o,{label:"状态",name:"state"},{default:i(()=>[u(f,{modelValue:j.state,"onUpdate:modelValue":a[5]||(a[5]=e=>j.state=e),options:H,clearable:""},null,8,["modelValue"])]),_:1}),[3,4].includes(Number(j.state))?(m(),c(o,{key:0,label:"单号",name:"order_num"},{default:i(()=>[u(t,{modelValue:j.order_num,"onUpdate:modelValue":a[6]||(a[6]=e=>j.order_num=e),placeholder:"请输入单号"},null,8,["modelValue"])]),_:1})):p("",!0),u(o,{label:"询盘来源",name:"origin"},{default:i(()=>[u(f,{modelValue:j.origin,"onUpdate:modelValue":a[7]||(a[7]=e=>j.origin=e),options:M,clearable:""},null,8,["modelValue"])]),_:1}),u(o,{label:"是否转交",name:"is_transfer"},{default:i(()=>[u(b,{modelValue:j.is_transfer,"onUpdate:modelValue":a[8]||(a[8]=e=>j.is_transfer=e),label:["是","否"]},null,8,["modelValue"])]),_:1}),u(o,{label:"邮箱",name:"client_email"},{default:i(()=>[u(t,{modelValue:j.client_email,"onUpdate:modelValue":a[9]||(a[9]=e=>j.client_email=e),placeholder:"请输入客户邮箱"},null,8,["modelValue"])]),_:1}),u(o,{label:"电话",name:"client_phone"},{default:i(()=>[u(t,{modelValue:j.client_phone,"onUpdate:modelValue":a[10]||(a[10]=e=>j.client_phone=e),placeholder:"请输入客户电话"},null,8,["modelValue"])]),_:1}),u(o,{label:"跟进方式",name:"follow_up_method"},{default:i(()=>[u(V,{modelValue:j.follow_up_method,"onUpdate:modelValue":a[11]||(a[11]=e=>j.follow_up_method=e),options:$},null,8,["modelValue"])]),_:1}),u(o,{label:"跟进日期",name:"follow_up_date"},{default:i(()=>[u(r,{modelValue:j.follow_up_date,"onUpdate:modelValue":a[12]||(a[12]=e=>j.follow_up_date=e),mode:"date","enable-time-picker":"","allow-input":"",clearable:""},null,8,["modelValue"])]),_:1}),u(o,{label:"产品名称",name:"product_name"},{default:i(()=>[u(t,{modelValue:j.product_name,"onUpdate:modelValue":a[13]||(a[13]=e=>j.product_name=e),placeholder:"请输入产品名称"},null,8,["modelValue"])]),_:1}),u(o,{label:"产品规格",name:"product_specifications"},{default:i(()=>[u(h,{modelValue:j.product_specifications,"onUpdate:modelValue":a[14]||(a[14]=e=>j.product_specifications=e),placeholder:"请输入产品规格",clearable:""},null,8,["modelValue"])]),_:1}),u(o,{label:"利润(美金)",name:"profit"},{default:i(()=>[u(y,{modelValue:j.profit,"onUpdate:modelValue":a[15]||(a[15]=e=>j.profit=e),theme:"normal",placeholder:"请输入利润"},null,8,["modelValue"])]),_:1}),u(o,{label:"备注",name:"remark"},{default:i(()=>[u(h,{modelValue:j.remark,"onUpdate:modelValue":a[16]||(a[16]=e=>j.remark=e),placeholder:"客户备注",clearable:""},null,8,["modelValue"])]),_:1}),u(o,{label:"相关文件",name:"file"},{default:i(()=>[u(w,{modelValue:j.file,"onUpdate:modelValue":a[17]||(a[17]=e=>j.file=e),action:"/",theme:"image",tips:"请选择单张图片文件上传",accept:"image/*"},null,8,["modelValue"])]),_:1}),u(o,{class:"btn-box"},{default:i(()=>[u(R,{size:"small",class:"form-btn-space"},{default:i(()=>[u(N,{theme:"default",variant:"base",type:"reset",style:{width:"100px"}},{default:i(()=>[...a[18]||(a[18]=[g(" 重置 ",-1)])]),_:1}),u(N,{theme:"primary",type:"submit",style:{width:"100%"}},{default:i(()=>[...a[19]||(a[19]=[g("提交",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["data","disabled"])])]),_:1})])])}}},[["__scopeId","data-v-b753ea5f"]]);export{x as default};
